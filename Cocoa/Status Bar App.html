<!doctype html><html class="theme-next mist" lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css"><meta name="keywords" content="Jason,Blog"><link rel="alternate" href="/atom.xml" title="Jason" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1"><meta name="description" content="This article introduces how to build status bar app on Mac OS X using Cocoa with Swift. The source code can be downloaded here.Development environment:OS X: 10.11.4XCode: 7.3Swift: 2.2After it’s finis"><meta name="keywords"><meta property="og:type" content="article"><meta property="og:title" content="Status Bar App"><meta property="og:url" content="https://en.atjason.com/Cocoa/Status Bar App.html"><meta property="og:site_name" content="Jason"><meta property="og:description" content="This article introduces how to build status bar app on Mac OS X using Cocoa with Swift. The source code can be downloaded here.Development environment:OS X: 10.11.4XCode: 7.3Swift: 2.2After it’s finis"><meta property="og:image" content="https://farm6.staticflickr.com/5488/30640931343_83d18f8a5a_o.jpg"><meta property="og:image" content="https://farm6.staticflickr.com/5675/31411993296_9b15e794b0_o.jpg"><meta property="og:image" content="https://farm6.staticflickr.com/5800/31078308250_73c43c03e0_o.jpg"><meta property="og:image" content="https://farm6.staticflickr.com/5520/31078308940_84a366791b_o.jpg"><meta property="og:image" content="https://farm6.staticflickr.com/5509/31411998896_3027536681_o.jpg"><meta property="og:image" content="https://farm6.staticflickr.com/5346/31448852885_edf4a2bd81_o.jpg"><meta property="og:image" content="https://farm6.staticflickr.com/5685/31303433362_8b4cf99dd8_o.jpg"><meta property="og:image" content="https://farm6.staticflickr.com/5523/30640938093_f9355d69ca_o.jpg"><meta property="og:image" content="https://farm6.staticflickr.com/5349/31303436232_0f985fed3d_o.jpg"><meta property="og:image" content="https://farm6.staticflickr.com/5718/31078312640_0c66c7e47b_o.jpg"><meta property="og:updated_time" content="2016-12-06T01:51:54.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Status Bar App"><meta name="twitter:description" content="This article introduces how to build status bar app on Mac OS X using Cocoa with Swift. The source code can be downloaded here.Development environment:OS X: 10.11.4XCode: 7.3Swift: 2.2After it’s finis"><meta name="twitter:image" content="https://farm6.staticflickr.com/5488/30640931343_83d18f8a5a_o.jpg"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",sidebar:{position:"left",display:"post",offset:12,offset_float:0,b2t:!1,scrollpercent:!1},fancybox:!1,motion:!1,duoshuo:{userId:"0",author:"Author"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://en.atjason.com/Cocoa/Status Bar App.html"><title>Status Bar App | Jason</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="en"><script>!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s)}(window,document,"script",0,"ga"),ga("create","UA-26569268-1","auto"),ga("send","pageview")</script><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Jason</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>Categories</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>Search</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocapitalize="off" autocomplete="off" autocorrect="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://en.atjason.com/Cocoa/Status Bar App.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Jason"><meta itemprop="description" content=""><meta itemprop="image" content="https://i.imgur.com/lS5NEuU.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jason"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Status Bar App</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-08T12:56:00+08:00">2016-04-08 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Cocoa/" itemprop="url" rel="index"><span itemprop="name">Cocoa</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>This article introduces how to build status bar app on Mac OS X using Cocoa with Swift. The source code can be downloaded <a href="https://github.com/atjason/CocoaDemoWithSwift/tree/master/StatusBarApp/StatusBarApp" target="_blank" rel="external">here</a>.</p><p>Development environment:</p><ul><li>OS X: 10.11.4</li><li>XCode: 7.3</li><li>Swift: 2.2</li></ul><p>After it’s finished, the app looks like:</p><p><img src="https://farm6.staticflickr.com/5488/30640931343_83d18f8a5a_o.jpg" alt=""></p><h1 id="How-to-Run-as-Status-Bar-App"><a href="#How-to-Run-as-Status-Bar-App" class="headerlink" title="How to Run as Status Bar App?"></a>How to Run as Status Bar App?</h1><p>In another word, how to make the application not show a dock icon? The key point is to modify the application’s Info.plist file and indicate that it’s an agent. “Agent” is Apple’s term for a background application that doesn’t present a dock icon.<br>Select the project at the top of the project navigator. Open the Info tab at the top of the main editor. Add a new entry of <strong>Application is agent (UIElement)</strong> and set the value of this entry to YES.</p><p><img src="https://farm6.staticflickr.com/5675/31411993296_9b15e794b0_o.jpg" alt=""></p><a id="more"></a><h1 id="How-to-Let-Status-App-Start"><a href="#How-to-Let-Status-App-Start" class="headerlink" title="How to Let Status App Start?"></a>How to Let Status App Start?</h1><p>It’s better don’t write much code in AppDelegate or other single class. To do it, I split main code in these 2 controllers:</p><ol><li><p>StatusItemController<br>This controller is mainly to ‘start’ the app, i.e., init the status bar item. And also set the menu for status bar item.</p></li><li><p>StatusMenuController<br>This controller mainly works as the delegate of status bar item’s menu. E.g., implement the actions of menu items.</p></li></ol><p>Then, how to let the app start? Steps:</p><ul><li>Open ‘MainMenu.xib’.</li><li>Create Menu and sub-menus.</li></ul><p><img src="https://farm6.staticflickr.com/5800/31078308250_73c43c03e0_o.jpg" alt=""></p><ul><li>Add an Object. Set its class to ‘StatusMenuController’.</li></ul><p><img src="https://farm6.staticflickr.com/5520/31078308940_84a366791b_o.jpg" alt=""></p><p><img src="https://farm6.staticflickr.com/5509/31411998896_3027536681_o.jpg" alt=""></p><ul><li>Add another Object of ‘StatusItemController’.</li><li>Connect Menu object to StatusMenuController’s ‘menu’ outlet.</li></ul><p><img src="https://farm6.staticflickr.com/5346/31448852885_edf4a2bd81_o.jpg" alt=""></p><ul><li>Connect StatusMenuController to StatusItemController’s ‘menuController’ outlet.</li></ul><p><img src="https://farm6.staticflickr.com/5685/31303433362_8b4cf99dd8_o.jpg" alt=""></p><ul><li>Open StatusItemController.swift, init the status bar item in ‘awakeFromNib’.<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">StatusItemController</span>: <span class="title">NSObject</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> statusItem: <span class="type">NSStatusItem</span>!</div><div class="line">  <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> menuController: <span class="type">StatusMenuController</span>!  </div><div class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">awakeFromNib</span><span class="params">()</span></span> &#123;</div><div class="line">    statusItem = <span class="type">NSStatusBar</span>.systemStatusBar()</div><div class="line">      .statusItemWithLength(<span class="type">NSVariableStatusItemLength</span>)</div><div class="line">    statusItem.title = <span class="string">"App"</span></div><div class="line">    statusItem.highlightMode = <span class="literal">true</span></div><div class="line">    statusItem.menu = menuController.menu</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ul><p>That’s it. Now the app should be able to correctly start. As you can see, the key point is, app will init the ‘MainMenu.xib’ (as defined in Info.plist &gt; ‘Main nib file base name’), then all the objects in ‘MainMenu.xib” will be created. So, the menu and controllers you added in ‘MainMenu.xib” will be created. Clear?</p><p>In this case, the AppDelegate could even keep empty. Cool, right?<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@NSApplicationMain</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span>: <span class="title">NSObject</span>, <span class="title">NSApplicationDelegate</span> </span>&#123;&#125;</div></pre></td></tr></table></figure><p></p><h1 id="How-to-Show-Percent-in-Status-Bar"><a href="#How-to-Show-Percent-in-Status-Bar" class="headerlink" title="How to Show Percent in Status Bar?"></a>How to Show Percent in Status Bar?</h1><p>There’s class of <code>NSProgressIndicator</code>. The fact of it is a view. Thus the problem becomes how to add this view to status bar.</p><p>You will find, the <code>NSStatusItem.view</code> is <code>nil</code>, thus you can’t add to its subview. From the API of <code>NSStatusItem</code> we can found, it’s suggested to use <code>NSStatusItem.button</code> to customize. OK, we can add view to subviews of the <code>button</code>.<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// The button that is displayed in the status bar. This is created automatically on the creation of the StatusItem. Behavior customization for the button, such as image, target/action, tooltip, can be set with this property.</span></div><div class="line"><span class="meta">@available</span>(<span class="type">OSX</span> <span class="number">10.10</span>, *)</div><div class="line"><span class="keyword">public</span> <span class="keyword">var</span> button: <span class="type">NSStatusBarButton</span>? &#123; <span class="keyword">get</span> &#125;</div></pre></td></tr></table></figure><p></p><p>That’s not finished. Using this code could show the percent in status bar, but the size of status bar item is incorrect. How to deal with it? To be honest, I didn’t find a good way, but find a walkaround way, i.e., add an <strong>empty</strong> image to the status bar item. And then add <code>NSProgressIndicator</code> to the <code>button</code>. It’s not good, but works. The code is as following:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">if</span> <span class="keyword">let</span> button = statusItem.button &#123;</div><div class="line">        <span class="comment">// <span class="doctag">FIXME:</span> it works, but obviously not good.</span></div><div class="line">        <span class="keyword">let</span> frame = <span class="type">NSRect</span>(x: <span class="number">6</span>, y: <span class="number">2</span>, width: <span class="number">18</span>, height: <span class="number">18</span>)</div><div class="line">        <span class="keyword">let</span> progressIndicator = <span class="type">NSProgressIndicator</span>(frame: frame)</div><div class="line">        progressIndicator.style = .<span class="type">SpinningStyle</span></div><div class="line">        progressIndicator.indeterminate = <span class="literal">false</span></div><div class="line">        progressIndicator.doubleValue = <span class="number">30</span></div><div class="line">        </div><div class="line">        <span class="comment">// Use empty image to extand the status item's size</span></div><div class="line">        statusItem.image = <span class="type">NSImage</span>(named: <span class="string">"EmptyIconImage"</span>)</div><div class="line">        button.addSubview(progressIndicator)</div><div class="line">  &#125;</div><div class="line">``` </div><div class="line"><span class="type">And</span> the percent looks like:</div><div class="line"></div><div class="line">![](https:<span class="comment">//farm6.staticflickr.com/5492/31332937901_69060ed428_o.jpg)</span></div><div class="line">![](https:<span class="comment">//farm6.staticflickr.com/5720/31303434582_304507af58_o.jpg)</span></div><div class="line"></div><div class="line"># <span class="type">How</span> to <span class="type">Disable</span> a <span class="type">Menu</span> <span class="type">Item</span>?</div><div class="line"><span class="type">It</span> sounds very easy. <span class="type">Just</span> <span class="keyword">set</span> the `<span class="type">NSMenuItem</span>.enabled = <span class="literal">false</span>`. <span class="type">But</span> the fact <span class="keyword">is</span> not. <span class="type">Read</span> the description <span class="keyword">for</span> `<span class="type">NSMenuItem</span>.autoenablesItems`:</div><div class="line"></div><div class="line">```swift</div><div class="line">    <span class="comment">/* Set and get whether the menu autoenables items.  If a menu autoenables items, then calls to -[NSMenuItem setEnabled:] are ignored, and the enabled state is computed via the NSMenuValidation informal protocol below.  Autoenabling is on by default. */</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">var</span> autoenablesItems: <span class="type">Bool</span></div></pre></td></tr></table></figure><p></p><p>As you can see, <code>NSMenuItem.autoenablesItems</code> is enabled by default. And if it’s enabled, the set of <code>NSMenuItem.enabled</code> property will be ignored. Thus, if you want to manually control the <code>NSMenuItem.enabled</code> property, first disable the <code>NSMenuItem.autoenablesItems</code> property.</p><h1 id="How-to-Support-Dark-Mode"><a href="#How-to-Support-Dark-Mode" class="headerlink" title="How to Support Dark Mode?"></a>How to Support Dark Mode?</h1><p>There’re 2 key points needed to support dark mode of OS X.</p><ol><li>The icon itself should support. To be exactly, the background of the icon should be transparent.</li><li>Set the <code>NSMenuItem.image?.template = true</code></li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* The 'template' property is metadata that allows clients to be smarter about image processing.  An image should be marked as a template if it is basic glpyh-like black and white art that is intended to be processed into derived images for use on screen.</span></div><div class="line"> </div><div class="line"> NSButtonCell applies effects to images based on the state of the button.  For example, images are shaded darker when the button is pressed.  If a template image is set on a cell, the cell can apply more sophisticated effects.  For example, it may be processed into an image that looks engraved when drawn into a cell whose interiorBackgroundStyle is NSBackgroundStyleRaised, like on a textured button.</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">var</span> template: <span class="type">Bool</span></div></pre></td></tr></table></figure><p>The normal and dark status bar items look like:</p><p><img src="https://farm6.staticflickr.com/5523/30640938093_f9355d69ca_o.jpg" alt=""><br><img src="https://farm6.staticflickr.com/5349/31303436232_0f985fed3d_o.jpg" alt=""></p><h1 id="How-to-Support-Indentation-Level"><a href="#How-to-Support-Indentation-Level" class="headerlink" title="How to Support Indentation Level?"></a>How to Support Indentation Level?</h1><p>Easy. Just set the <code>NSMenuItem.indentationLevel</code>.</p><p><img src="https://farm6.staticflickr.com/5718/31078312640_0c66c7e47b_o.jpg" alt=""></p><h1 id="How-to-Pop-Over"><a href="#How-to-Pop-Over" class="headerlink" title="How to Pop Over?"></a>How to Pop Over?</h1><p>It’s easy to pop over status item. Check the following code:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> button = statusItem.button &#123;</div><div class="line">  popover.showRelativeToRect(button.bounds, ofView: button, preferredEdge: .<span class="type">MinY</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>But it’s hard to pop over menu item, as menu item’s view is nil by default. And then no view or bound to show popover relatively. Ever see some other app like <a href="http://www.clipmenu.com/blog/2014/11/11/clipmenu-1-0-0a1-released/" target="_blank" rel="external">ClipMenu</a> could implement this feature, but hasn’t found how to do it.</p><p>Another walkaround is to use <code>NSMenuItem.toolTip</code> to show additional information of a menu item.</p><h1 id="What-Left"><a href="#What-Left" class="headerlink" title="What Left?"></a>What Left?</h1><ul><li>tag and representedObject</li><li>action</li></ul></div><div></div><div></div><div></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/Cocoa/Storyboard.html" rel="next" title="Storyboard"><i class="fa fa-chevron-left"></i> Storyboard</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/Cocoa/Outline With Controller.html" rel="prev" title="Use NSOutlineView With NSTreeController">Use NSOutlineView With NSTreeController <i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview">Overview</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="https://i.imgur.com/lS5NEuU.jpg" alt="Jason"><p class="site-author-name" itemprop="name">Jason</p><p class="site-description motion-element" itemprop="description">Digital Nomad, Mac Developer</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/"><span class="site-state-item-count">12</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">2</span> <span class="site-state-item-name">categories</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/atjason" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub </a></span><span class="links-of-author-item"><a href="https://twitter.com/hereisjason" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i> Twitter</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-globe"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="http://toolinbox.net/" title="Toolinbox" target="_blank">Toolinbox</a></li></ul></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#How-to-Run-as-Status-Bar-App"><span class="nav-number">1.</span> <span class="nav-text">How to Run as Status Bar App?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#How-to-Let-Status-App-Start"><span class="nav-number">2.</span> <span class="nav-text">How to Let Status App Start?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#How-to-Show-Percent-in-Status-Bar"><span class="nav-number">3.</span> <span class="nav-text">How to Show Percent in Status Bar?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#How-to-Support-Dark-Mode"><span class="nav-number">4.</span> <span class="nav-text">How to Support Dark Mode?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#How-to-Support-Indentation-Level"><span class="nav-number">5.</span> <span class="nav-text">How to Support Indentation Level?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#How-to-Pop-Over"><span class="nav-number">6.</span> <span class="nav-text">How to Pop Over?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#What-Left"><span class="nav-number">7.</span> <span class="nav-text">What Left?</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2011 - <span itemprop="copyrightYear">2017</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Jason</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.ui.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script><script type="text/javascript">var disqus_config=function(){this.page.url="https://en.atjason.com/Cocoa/Status Bar App.html",this.page.identifier="Cocoa/Status Bar App.html",this.page.title="Status Bar App"},d=document,s=d.createElement("script");s.src="https://jason-en.disqus.com/embed.js",s.setAttribute("data-timestamp",""+ +new Date),(d.head||d.body).appendChild(s)</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle(),$("#local-search-input").focus()}var isfetched=!1,search_path="search.xml";0===search_path.length&&(search_path="search.xml");var path="/"+search_path,onPopupClose=function(e){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(e,t,o){"use strict";$.ajax({url:e,dataType:"xml",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),r=document.getElementById(t),s=document.getElementById(o);r.addEventListener("input",function(){var e=this.value.trim().toLowerCase().split(/[\s\-]+/),t=[];if(this.value.trim().length>0&&n.forEach(function(o){function n(e,t,o,n){for(var r=n[n.length-1],s=r.position,a=r.word,i=e.substring(t,o),c=[],l=0;s+a.length<=o&&0!=n.length;){var h=s-t,p=s-t+a.length;for(c.push(i.substring(l,h)),c.push('<b class="search-keyword">'+i.substring(h,p)+"</b>"),n.pop(),l=p;0!=n.length&&(r=n[n.length-1],s=r.position,a=r.word,l>s-t);)n.pop()}return c.push(i.substring(l)),c.join("")}var r=!1,s=0,a=o.title.trim(),i=a.toLowerCase(),c=o.content.trim().replace(/<[^>]+>/g,""),l=c.toLowerCase(),h=decodeURIComponent(o.url),p=[],u=[];if(""!=a&&(e.forEach(function(e,t){function o(e,t,o){var n=e.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(t=t.toLowerCase(),e=e.toLowerCase());(s=t.indexOf(e,r))>-1;)a.push({position:s,word:e}),r=s+n;return a}p=p.concat(o(e,i,!1)),u=u.concat(o(e,l,!1))}),(p.length>0||u.length>0)&&(r=!0,s=p.length+u.length)),r){var f="";p.sort(function(e,t){return t.position-e.position}),u.sort(function(e,t){return t.position-e.position}),0!=p.length?f+="<li><a href='"+h+"' class='search-result-title'>"+n(a,0,a.length,p)+"</a>":f+="<li><a href='"+h+"' class='search-result-title'>"+a+"</a>";var d=parseInt(1),g=!1;-1===d&&(g=!0);for(var v=0;0!=u.length&&(g||v<d);){var $=u[u.length-1],m=$.position,C=$.word,w=m-20,y=m+80;w<0&&(w=0),y<m+C.length&&(y=m+C.length),y>c.length&&(y=c.length),f+="<a href='"+h+'\'><p class="search-result">'+n(c,w,y,u)+"...</p></a>",v++}f+="</li>",t.push({item:f,hitCount:s,id:t.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===t.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{t.sort(function(e,t){return e.hitCount!=t.hitCount?t.hitCount-e.hitCount:e.id-t.id});var o='<ul class="search-result-list">';t.forEach(function(e,t){o+=e.item}),o+="</ul>",s.innerHTML=o}}),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),!1===isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(e){e.stopPropagation()})</script></body></html>